<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Sam Stoelinga (Samos IT) - Blog</title>
        <link rel="stylesheet" href="http://samos-it.com/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a href="http://github.com/samos123/">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="http://samos-it.com/">Sam Stoelinga (Samos IT) - Blog </a></h1>
                <nav><ul>
                    <li><a href="http://samos-it.com/category/algorithms.html">Algorithms</a></li>
                    <li><a href="http://samos-it.com/category/china.html">China</a></li>
                    <li><a href="http://samos-it.com/category/linux.html">Linux</a></li>
                    <li><a href="http://samos-it.com/category/openstack.html">Openstack</a></li>
                    <li><a href="http://samos-it.com/category/python.html">Python</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://samos-it.com/posts/hadoop-on-demand-with-openstack-cloudinit-salt.html">Hadoop on demand with Openstack, Cloudinit and Salt</a></h1>
<footer class="post-info">
        <abbr class="published" title="2014-11-27T13:12:00+01:00">
                Published: Thu 27 November 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/openstack.html">Openstack</a>. </p>
<p>tags: <a href="http://samos-it.com/tag/openstack.html">openstack</a> <a href="http://samos-it.com/tag/salt.html">salt</a> <a href="http://samos-it.com/tag/cloudinit.html">cloudinit</a> <a href="http://samos-it.com/tag/cloudconfig.html">cloudconfig</a> <a href="http://samos-it.com/tag/hadoop.html">hadoop</a> <a href="http://samos-it.com/tag/devops.html">devops</a> </p>
</footer><!-- /.post-info --><p>This post will describe the whole process of providing hadoop on demand
through Openstack, Cloudinit and Saltstack. We will use Openstack
to provision servers on demand, cloudconfig to install salt-master and
salt-minion and saltstack to deploy hadoop namenode and datanodes, all fully
automated. This makes us able to deploy a 5-100+ node (still need to test 20+) Hadoop HDFS
cluster within 5 minutes.</p>
<h2>Deploy salt-master with Cloudconfig</h2>
<p>We will install and configure salt-master to
auto_accept key files from the minions. Please note
that this is a security risk.</p>
<p>Create the following master-cloudconfig file:</p>
<div class="highlight"><pre><span class="c1">#cloud-config</span>
<span class="l-Scalar-Plain">apt_mirror</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://mirror.bjtu.edu.cn/ubuntu/</span>

<span class="l-Scalar-Plain">apt_sources</span><span class="p-Indicator">:</span>
 <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="s">&quot;ppa:saltstack/salt&quot;</span>

<span class="l-Scalar-Plain">packages</span><span class="p-Indicator">:</span>
 <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python-software-properties</span>
 <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">salt-master</span>
 <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">git</span>

<span class="l-Scalar-Plain">runcmd</span><span class="p-Indicator">:</span>
 <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bash /tmp/bootstrap-master.sh</span>

<span class="l-Scalar-Plain">write_files</span>
 <span class="l-Scalar-Plain">- content</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
        <span class="no">#!/bin/bash</span>
        <span class="no">sed -i &#39;s/^#auto_accept.*$/auto_accept: True/g&#39; /etc/salt/master</span>
        <span class="no">sudo service salt-master restart</span>
   <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/tmp/bootstrap-master.sh</span>
   <span class="l-Scalar-Plain">permissions</span><span class="p-Indicator">:</span> <span class="s">&quot;0755&quot;</span>
</pre></div>


<p>Now launch openstack instance with: <code>nova boot --name salt-master --image ubuntu_14.04 --user-data master-cloudconfig --flavor m1.medium --key-name sam</code>.
The salt-master that we launched in our case has as ip 192.168.111.66. You can ssh to this machine via ssh ubuntu@192.168.111.66</p>
<h2>Configuring the salt master to deploy a hadoop cluster</h2>
<p>In order to be able to deploy hadoop on the salt-master we are going to
manually configure the salt-master with the official hadoop formula.
We could also automate this via cloudconfig, but for sake of demonstration
I'm going to list the manual steps here.</p>
<h3>Configuring salt to use hadoop-formula and it's dependencies</h3>
<p>We are going to use the following formula: <a href="https://github.com/saltstack-formulas/hadoop-formula">Hadoop formula</a>, which
has as dependencies the <a href="https://github.com/saltstack-formulas/hostsfile-formula">hostsfile-formula</a> and the
<a href="https://github.com/saltstack-formulas/sun-java-formula">sun-java-formula</a>.
The hostsfile formula is to make all nodes accessible by their hostname/fqdn and
the sun-java-formula lets you automatically install java from oracle.</p>
<div class="highlight"><pre>ssh ubuntu@192.168.111.66 <span class="c"># SSH into your salt-master</span>
sudo mkdir /srv/salt
sudo mkdir /srv/salt/formulas
sudo <span class="s2">&quot;cd /srv/salt/formulas &amp;&amp; </span>
<span class="s2">      git clone https://github.com/saltstack-formulas/hadoop-formula</span>
<span class="s2">      git clone https://github.com/saltstack-formulas/hostsfile-formula &amp;&amp;</span>
<span class="s2">      git clone https://github.com/saltstack-formulas/sun-java-formula&quot;</span>

cat <span class="s">&lt;&lt; EOF &gt; /etc/salt/master.d/file_roots.conf</span>
<span class="s">file_roots:</span>
<span class="s">  base:</span>
<span class="s">    - /srv/salt</span>
<span class="s">    - /srv/salt/formulas/hadoop-formula</span>
<span class="s">    - /srv/salt/formulas/hostsfile-formula</span>
<span class="s">    - /srv/salt/formulas/sun-java-formul</span>
<span class="s">EOF</span>

cat <span class="s">&lt;&lt; EOF &gt; /etc/salt/master.d/pillar_roots.conf</span>
<span class="s">pillar_roots:</span>
<span class="s">  base:</span>
<span class="s">    - /srv/pillar</span>
<span class="s">EOF</span>

sudo service salt-master restart
</pre></div>


<h3>Configuring the top.sls state file to include hadoop and deps</h3>
<p>On the salt-master create the following file /srv/salt/top.sls:</p>
<div class="highlight"><pre><span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span>
  <span class="s">&#39;G@roles:hadoop_slave</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">G@roles:hadoop_master&#39;</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">match</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">compound</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hostsfile</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hostsfile.hostname</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sun-java</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sun-java.env</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hadoop</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hadoop.hdfs</span>
</pre></div>


<p>By using <a href="http://docs.saltstack.com/en/latest/topics/pillar/">pillar</a> we can also change the parameters of hadoop.
You can check all available parameters that are change-able here: 
<a href="https://github.com/saltstack-formulas/hadoop-formula/blob/master/pillar.example">hadoop-pillar.example</a>.</p>
<p>Create the following top.sls pillar file /srv/pillar/top.sls:</p>
<div class="highlight"><pre><span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span>
  <span class="s">&#39;G@roles:hadoop_slave</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">G@roles:hadoop_master&#39;</span><span class="p-Indicator">:</span>
     <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">hadoop</span>
</pre></div>


<p>and the following hadoop specific pillar file:</p>
<div class="highlight"><pre><span class="l-Scalar-Plain">hadoop</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">version</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">hdp-2.2.0</span> <span class="c1"># [&#39;apache-1.2.1&#39;, &#39;apache-2.2.0&#39;, &#39;hdp-1.3.0&#39;, &#39;hdp-2.2.0&#39;, &#39;cdh-4.5.0&#39;, &#39;cdh-4.5.0-mr1&#39;]</span>
  <span class="l-Scalar-Plain">users</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">hadoop</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">6000</span>
    <span class="l-Scalar-Plain">hdfs</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">6001</span>
</pre></div>


<h2>Deploy salt-minions as hadoop nodes</h2>
<p>Now that we have configured our salt-master we can start
deploying the salt-minions which will either server as hadoop-master(namenode)
or as hadoop-slave(datanode).</p>
<h3>Launching hadoop-master(namenode) nodes</h3>
<p>First create our cloudconfig file used by openstack hadoopmaster-cloudconfig:</p>
<div class="highlight"><pre><span class="c1">#cloud-config</span>
<span class="l-Scalar-Plain">apt_mirror</span><span class="p-Indicator">:</span> <span class="s">&quot;http://mirror.bjtu.edu.cn/ubuntu/&quot;</span>
<span class="l-Scalar-Plain">apt_sources</span><span class="p-Indicator">:</span> 
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="s">&quot;ppa:saltstack/salt&quot;</span>
<span class="l-Scalar-Plain">packages</span><span class="p-Indicator">:</span> 
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python-software-properties</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">salt-minion</span>

<span class="l-Scalar-Plain">runcmd</span><span class="p-Indicator">:</span> 
 <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bash /tmp/bootstrap-minion.sh</span>

<span class="l-Scalar-Plain">write_files</span><span class="p-Indicator">:</span> 
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">content</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
         <span class="no">roles:</span>
            <span class="no">- hadoop_master</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/etc/salt/grains</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">content</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
        <span class="no">#!/bin/bash</span>
        <span class="no">sed -i &#39;s/^#master.*$/master: 192.168.111.66/g&#39; /etc/salt/minion</span>
        <span class="no">sudo service salt-minion restart</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/tmp/bootstrap-minion.sh</span>
    <span class="l-Scalar-Plain">permissions</span><span class="p-Indicator">:</span> <span class="s">&quot;0755&quot;</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">content</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
        <span class="no">mine_functions:</span>
            <span class="no">network.interfaces: [eth0]</span>
            <span class="no">network.ip_addrs: [eth0]</span>
            <span class="no">grains.items: []</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/etc/salt/minion.d/mine_functions.conf</span>
</pre></div>


<p>Then create a new instance using openstack:
<code>nova boot --name hadoop-master-1 --image ubuntu_14.04 --user-data hadoopmaster-cloudconfig --flavor m1.medium --key-name sam</code></p>
<h3>Deploying hadoop-slave(datanode) nodes</h3>
<p>Create a hadoopslave-cloudconfig:</p>
<div class="highlight"><pre><span class="c1">#cloud-config</span>
<span class="l-Scalar-Plain">apt_mirror</span><span class="p-Indicator">:</span> <span class="s">&quot;http://mirror.bjtu.edu.cn/ubuntu/&quot;</span>
<span class="l-Scalar-Plain">apt_sources</span><span class="p-Indicator">:</span> 
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="s">&quot;ppa:saltstack/salt&quot;</span>
<span class="l-Scalar-Plain">packages</span><span class="p-Indicator">:</span> 
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python-software-properties</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">salt-minion</span>

<span class="l-Scalar-Plain">runcmd</span><span class="p-Indicator">:</span> 
 <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bash /tmp/bootstrap-minion.sh</span>

<span class="l-Scalar-Plain">write_files</span><span class="p-Indicator">:</span> 
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">content</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
         <span class="no">roles:</span>
            <span class="no">- hadoop_slave</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/etc/salt/grains</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">content</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
        <span class="no">#!/bin/bash</span>
        <span class="no">sed -i &#39;s/^#master.*$/master: 192.168.111.66/g&#39; /etc/salt/minion</span>
        <span class="no">sudo service salt-minion restart</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/tmp/bootstrap-minion.sh</span>
    <span class="l-Scalar-Plain">permissions</span><span class="p-Indicator">:</span> <span class="s">&quot;0755&quot;</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">content</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
        <span class="no">mine_functions:</span>
            <span class="no">network.interfaces: [eth0]</span>
            <span class="no">network.ip_addrs: [eth0]</span>
            <span class="no">grains.items: []</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/etc/salt/minion.d/mine_functions.conf</span>
</pre></div>


<p>Now launch 10 hadoop-slave nodes
<code>nova boot --name hadoop-slave --num-instances 10 --image ubuntu_14.04 --user-data hadoopslave-cloudconfig --flavor m1.medium --key-name sam</code></p>
<h3>Let saltstack deploy hadoop</h3>
<p>First make sure that the salt-master detected all our hadoop-master and hadoop-slave nodes. Execute the following comand: <code>salt '*' managed.up</code>
it should show your 11 nodes.</p>
<p>If all nodes are up and detected you can start deployment of hadoop with the following command:</p>
<div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> state.highstate
</pre></div>


<h2>Accessing the hadoop HDFS cluster</h2>
<p>After hadoop has been successfully deployed you can go to http://{hadoop_masterip}:50070 and check that
10 live nodes are active.</p>
<p>Now you can login to any of the nodes and save files to hdfs like this:</p>
<div class="highlight"><pre>sudo -u hdfs <span class="s2">&quot;hadoop fs -mkdir -p /user/hdfs&quot;</span>
sudo -u hdfs <span class="s2">&quot;hadoop fs -put /tmp/bootstrap-minion.sh /user/hdfs/test.sh&quot;</span>
</pre></div>


<p>Hope this tutorial was useful! </p>
<p>Notes: You can also configure
<a href="https://github.com/number5/cloud-init/blob/master/doc/examples/cloud-config-salt-minion.txt">salt-minion directly through cloudconfig</a> instead.</p><p>There are <a href="http://samos-it.com/posts/hadoop-on-demand-with-openstack-cloudinit-salt.html#disqus_thread">comments</a>.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/neutron-multiple-allocation-pools-single-subnet.html" rel="bookmark"
                           title="Permalink to Neutron Multiple allocation pools single subnet (Solve Fragmented floating ips problem)">Neutron Multiple allocation pools single subnet (Solve Fragmented floating ips problem)</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-11-24T12:01:00+01:00">
                Published: Mon 24 November 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/openstack.html">Openstack</a>. </p>
<p>tags: <a href="http://samos-it.com/tag/openstack.html">openstack</a> <a href="http://samos-it.com/tag/networking.html">networking</a> <a href="http://samos-it.com/tag/neutron.html">neutron</a> </p>
</footer><!-- /.post-info -->                <p>In a lab environment in the university I only had access to a list of fragmented
public routable IP addresses in a single subnet. For example I got access to the following ips
50.15.15.10, 55.15.15.12-15, 55.15.15.17. But I am not allowed ...</p>
                <a class="readmore" href="http://samos-it.com/posts/neutron-multiple-allocation-pools-single-subnet.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/neutron-multiple-allocation-pools-single-subnet.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/openstack-networking-study-notes.html" rel="bookmark"
                           title="Permalink to Openstack Networking Study Notes">Openstack Networking Study Notes</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-08-29T13:42:00+02:00">
                Published: Fri 29 August 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/openstack.html">Openstack</a>. </p>
<p>tags: <a href="http://samos-it.com/tag/openstack.html">openstack</a> <a href="http://samos-it.com/tag/networking.html">networking</a> <a href="http://samos-it.com/tag/neutron.html">neutron</a> <a href="http://samos-it.com/tag/study.html">study</a> </p>
</footer><!-- /.post-info -->                <p>I recommend these links in the following order:</p>
<ul>
<li><a href="http://blog.scottlowe.org/2013/05/07/using-gre-tunnels-with-open-vswitch/">ScottLowe blog: Using GRE tunnels with OpenvSwitch</a></li>
<li><a href="http://blog.scottlowe.org/2013/05/15/examining-open-vswitch-traffic-patterns/">ScottLowe blog: Examining OpenvSwitch traffic patterns</a></li>
<li><a href="http://www.hastexo.com/system/files/neutron_packet_flows-notes-handout.pdf">Hastexto: Neutron Packet Flows (PDF/Presentation)</a></li>
</ul>
                <a class="readmore" href="http://samos-it.com/posts/openstack-networking-study-notes.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/openstack-networking-study-notes.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/docker-get-private-ip-address-of-container.html" rel="bookmark"
                           title="Permalink to Docker get private ip address of container">Docker get private ip address of container</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-07-08T14:25:00+02:00">
                Published: Tue 08 July 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/linux.html">Linux</a>. </p>
<p>tags: <a href="http://samos-it.com/tag/linux.html">linux</a> <a href="http://samos-it.com/tag/docker.html">docker</a> <a href="http://samos-it.com/tag/container.html">container</a> </p>
</footer><!-- /.post-info -->                <p>In order to access other containers from a container it's needed
to get the private IP address of the other containers. The following
command is able to get the private ip address of the container.</p>
<div class="highlight"><pre><span class="gp">$</span> docker inspect --format<span class="o">=</span><span class="s2">&quot;{{.NetworkSettings.IPAddress}}&quot;</span> <span class="nv">$CONTAINER_ID_OR_NAME</span>
<span class="go">172.17.0.15</span>
</pre></div>
                <a class="readmore" href="http://samos-it.com/posts/docker-get-private-ip-address-of-container.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/docker-get-private-ip-address-of-container.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/docker-multi-website-single-ip-host-haproxy.html" rel="bookmark"
                           title="Permalink to Docker Multiple websites/domains on single ip/host tutorial using a HAproxy as reverse proxy">Docker Multiple websites/domains on single ip/host tutorial using a HAproxy as reverse proxy</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-07-07T10:15:00+02:00">
                Published: Mon 07 July 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/linux.html">Linux</a>. </p>
<p>tags: <a href="http://samos-it.com/tag/linux.html">linux</a> <a href="http://samos-it.com/tag/docker.html">docker</a> <a href="http://samos-it.com/tag/container.html">container</a> </p>
</footer><!-- /.post-info -->                <p>This post will describe how to expose multiple docker containers
running websites on port 80 using HAproxy as a reverse proxy.
This makes it possible to run multiple websites on different domains
on a single public ip of the host.</p>
<p>The basic setup is to create 1 container for haproxy ...</p>
                <a class="readmore" href="http://samos-it.com/posts/docker-multi-website-single-ip-host-haproxy.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/docker-multi-website-single-ip-host-haproxy.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/move-first-word-to-end-of-line-linux-awk.html" rel="bookmark"
                           title="Permalink to Move first word to end of line (Linux/awk)">Move first word to end of line (Linux/awk)</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-06-08T20:29:00+02:00">
                Published: Sun 08 June 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/linux.html">Linux</a>. </p>

</footer><!-- /.post-info -->                <p>Move the first word of a line to the end of line on Linux using AWK.
We first store the first column(first word) in the variable t. Then
we set the first column to be empty. At last we add a new column
after the last column of the ...</p>
                <a class="readmore" href="http://samos-it.com/posts/move-first-word-to-end-of-line-linux-awk.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/move-first-word-to-end-of-line-linux-awk.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/ssh-to-server-behind-firewall-via-ssh-tunnel.html" rel="bookmark"
                           title="Permalink to SSH to server behind a firewall via an SSH tunnel">SSH to server behind a firewall via an SSH tunnel</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-05-10T00:00:00+02:00">
                Published: Sat 10 May 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/linux.html">Linux</a>. </p>
<p>tags: <a href="http://samos-it.com/tag/linux.html">linux</a> <a href="http://samos-it.com/tag/ssh.html">ssh</a> <a href="http://samos-it.com/tag/firewall.html">firewall</a> <a href="http://samos-it.com/tag/tunnel.html">tunnel</a> </p>
</footer><!-- /.post-info -->                <p>A server behind a firewall was unaccesible from my home,
but another server which is on the same local network had
public SSH access from my home. So we can create an SSH tunnel
via this public server to the server behind a firewall.</p>
<p>For example the public ssh server ...</p>
                <a class="readmore" href="http://samos-it.com/posts/ssh-to-server-behind-firewall-via-ssh-tunnel.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/ssh-to-server-behind-firewall-via-ssh-tunnel.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/recursive-karatsuba-multiplication-python.html" rel="bookmark"
                           title="Permalink to Recursive karatsuba multiplication in Python">Recursive karatsuba multiplication in Python</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-05-04T00:00:00+02:00">
                Published: Sun 04 May 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/algorithms.html">Algorithms</a>. </p>
<p>tags: <a href="http://samos-it.com/tag/coding.html">coding</a> <a href="http://samos-it.com/tag/programming.html">programming</a> <a href="http://samos-it.com/tag/python.html">python</a> <a href="http://samos-it.com/tag/algorithms.html">algorithms</a> </p>
</footer><!-- /.post-info -->                <p>I'm currently taking the class Algorithm: Design and Analysis of Stanford via Coursera and
in the class the Karatsuba algorithm got mentioned. I went ahead and implemented it based
on the lecture slides.</p>
<p>The Karatsuba algorithm is a fast multiplication algorithm. It's special because
it was the first ...</p>
                <a class="readmore" href="http://samos-it.com/posts/recursive-karatsuba-multiplication-python.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/recursive-karatsuba-multiplication-python.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/using-nested-tmux-over-ssh-and-how-to-detach-a-nested-tmux.html" rel="bookmark"
                           title="Permalink to Using nested tmux over ssh and how to detach a nested tmux">Using nested tmux over ssh and how to detach a nested tmux</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-08-15T02:08:00+02:00">
                Published: Thu 15 August 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/linux.html">Linux</a>. </p>

</footer><!-- /.post-info -->                <p>Today I logged in to my laptop at home from work which was already
running a tmux session, so thought yea just attach cool can continue
with what I was looking at at home. I forgot that the keys would be the
same ofcourse, and was unable to use the ...</p>
                <a class="readmore" href="http://samos-it.com/posts/using-nested-tmux-over-ssh-and-how-to-detach-a-nested-tmux.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/using-nested-tmux-over-ssh-and-how-to-detach-a-nested-tmux.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="http://samos-it.com/posts/removedetach-a-pci-device-linux-kvm-vga-passthrgough-nvidia-quadro-2000.html" rel="bookmark"
                           title="Permalink to Remove/detach a PCI device linux (kvm VGA passthrgough Nvidia Quadro 2000)">Remove/detach a PCI device linux (kvm VGA passthrgough Nvidia Quadro 2000)</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-06-09T08:55:00+02:00">
                Published: Sun 09 June 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://samos-it.com/author/sam-stoelinga.html">Sam Stoelinga</a>
        </address>
<p>In <a href="http://samos-it.com/category/linux.html">Linux</a>. </p>

</footer><!-- /.post-info -->                <p><strong>Answer:</strong>  </p>
<div class="highlight"><pre><span class="nb">echo</span> -n <span class="s2">&quot;1&quot;</span> &gt; /sys/bus/pci/devices/0000:02:00.0/remove
</pre></div>


<p>Where 0000:02:00.0 is related to your pci device address which can
be obtained from the command <code>lspci</code></p>
<p><strong>Related story:</strong><br />
Was working on KVM vga passthrough and encountered problems with the
graphics card nvidia Quadro ...</p>
                <a class="readmore" href="http://samos-it.com/posts/removedetach-a-pci-device-linux-kvm-vga-passthrgough-nvidia-quadro-2000.html">read more</a>
<p>There are <a href="http://samos-it.com/posts/removedetach-a-pci-device-linux-kvm-vga-passthrgough-nvidia-quadro-2000.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="http://samos-it.com/index2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-20975967-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'samosit';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>